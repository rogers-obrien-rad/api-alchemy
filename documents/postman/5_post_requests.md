# HTTP POST REQUESTS

You will likely be using Postman to try out third-party APIs by making HTTP requests according to their documentation. These section will walk you through the steps to make your first HTTP POST requests with Postman!

> It is important to follow this article from top-to-bottom. Some of the latter requests might require setup that is done in a previous step.


## EXAMPLE API: RESTFUL BOOKER

We will be using the [Restful Booker API](https://restful-booker.herokuapp.com/) to create and retrieve fake hotel bookings to showcase POST requests in Postman.

## SETUP

Before we start making GET requests, let's create a new collection so that we can store these requests in one location and have a place where we can specify the variables we will need. You can learn how to create a new collection by referencing the [Postman: Collections](https://github.com/rogers-obrien-rad/api-alchemy/blob/main/documents/postman/collections.md) article.

 1. Create a collection called "Hotel Booking". We will save requests to this collection.

## CREATE BOOKING

We are going to use a POST request to create an imaginary booking.


### INITIALIZE REQUEST

The Restful Booking endpoint to create a booking is:

```
https://restful-booker.herokuapp.com/booking
```

and the documentation can be found [here](https://restful-booker.herokuapp.com/apidoc/index.html#api-Booking-CreateBooking)

 1. Use the "+" button to create a new request.
 2. This time, we are going to be creating a POST so select the dropdown that currently says "GET" and choose the option for "POST".
 3. Copy the URL above and paste it into Postman. Save the request as "Create Booking" to the "Hotel Booking" collection you should have created in the Setup step.


### ADD HEADER

 1. We now have to include the `Content-Type` in the request Headers. When you save the request as a POST request, you will have a few Headers that are automatically created. You can view them by selecting the Headers tab:

![image1](https://github.com/rogers-obrien-rad/api-alchemy/assets/33231914/d2f9f6c4-fe07-425b-82a3-5862ea4f1f45)

 2. We need to add a `Content-Type` Header. Click the "Key" text in the bottom row and type in "Content-Type" and in the "Value" column add "application/json" because we are going to be sending JSON data in our request. You will notice that as you type, Postman will suggest options for you that you can select. Your table should now look like this:

![image2](https://github.com/rogers-obrien-rad/api-alchemy/assets/33231914/816a50d6-611a-4a75-bf54-0c7cbb527e42)

### ADD BODY

Lastly, we will need to add the body data which will contain the information regarding the booking.

 1. Select the "Body" tab on the "Create Booking" request.
 2. We specified `application/json` in the Header previously, so select the radio button for "raw" and you should see a text entry box appear and a blue-text dropdown with "JSON" currently active:
 3. 
![image3](https://github.com/rogers-obrien-rad/api-alchemy/assets/33231914/e05c5acc-8244-432f-92b4-d401539d0acf)

 3. Now we just have to paste in JSON data. You can use the data below and modify it as you see fit:

```json
{
    "firstname" : "Hagen",
    "lastname" : "Fritz",
    "totalprice" : 300,
    "depositpaid" : true,
    "bookingdates" : {
        "checkin" : "2023-10-20",
        "checkout" : "2023-10-22"
    },
    "additionalneeds" : "Breakfast"
}
```

## SEND REQUEST

With the Headers and Body setup, it is time to create our booking!

 1. Use the button to Save the request
 2. Hit the blue "Send" button
 3. Assuming everything went smoothly, you should get a 200: OK status code and a message that looks very similar to the request body except now you have a "bookingid" parameter (that you should take note of):

![image4](https://github.com/rogers-obrien-rad/api-alchemy/assets/33231914/76ab623a-341f-4d35-b435-5a409c345d48)


## CHECK BOOKING

We can check that the booking went through another way: by using a GET request specifying the ID that was generated by the server for the booking we sent.

### INITIALIZE REQUEST

The Restful Booking endpoint to create a booking is:

```
https://restful-booker.herokuapp.com/booking/:id
```

and the documentation can be found [here](https://restful-booker.herokuapp.com/apidoc/index.html#api-Booking-GetBooking)

 1. Use the "+" icon﻿ to create a new request.
 2. Copy the URL above and paste it into Postman. Save the request as "Get Booking" to the "Hotel Booking" collection you should have created in the Setup step.


### SPECIFY PATH PARAMETER

You might have noticed that when you copied the URL above, the "Params" section of the "Get Booking" request updated to include a Path Variables section with a Key of `id`. This happened because Postman recognizes anything preceded by a colon as a Path Variable.

We need to specify the `id` Path Parameter with the ID of the booking we just created.

 1. You should be able to find the booking ID by clicking back to the "Create Booking" POST request and finding the response at the bottom of Postman. Remember the `bookingid` of the request you just made; the value should be near the top:

![image5](https://github.com/rogers-obrien-rad/api-alchemy/assets/33231914/856c376b-26fa-4340-8920-24588da81ba0)

 2. Navigate back to the "Get Booking" request, and select the "Params" section and input the `bookingid` value in the "Value" column for the Path Variables table. Your "Params" section should look similar to below but with your unique `id` value:

![image6](https://github.com/rogers-obrien-rad/api-alchemy/assets/33231914/5973828b-37c2-4525-849a-e83783f65ed8)

### SEND REQUEST

That is all we need for this GET request. So when you are ready:

1. Use the button to Save the request
2. Hit the blue "Send" button    ﻿﻿

You might have received a 404: Not Found status code with a message of "Not Found". The API we are using resets the bookings every ~10 minutes so your previous booking might have been cleared. If that is the case:

 1. Send the "Create Booking" POST request again
 2. Note the new `bookingid` that would have been created for you
 3. Update the `id` Path Variable in the "Get Booking" GET request
 4. Send the "Get Booking" GET request again

If everything went smoothly, you should see a copy of the JSON data that you used previously to create your booking. In my case:

```json
{
    "firstname": "Hagen",
    "lastname": "Fritz",
    "totalprice": 300,
    "depositpaid": true,
    "bookingdates": {
        "checkin": "2023-10-20",
        "checkout": "2023-10-22"
    },
    "additionalneeds": "Breakfast"
}
```

---
